# 数学建模三阶段工作指南

本文档介绍数学建模技能中三个阶段的职责、工作流程和协作关系。

---

## 💡 创新指南

本技能鼓励创新和灵活性：

### 算法组合

- 可组合多个算法：如"灰色预测+神经网络"
- 参考不同类别的算法：如图论算法用于优化

### 题目特殊分析

- 当常规方法不适用时，灵活调整
- 分析题目独特性，选择或设计专门方法

### 创新记录

- 在分析文档中说明选择理由
- 在论文中突出创新点

---

## 阶段概览

```
┌──────────────────────────────────────────────────────────────────────┐
│                        数学建模三阶段工作流                           │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌──────────────┐      ┌──────────────┐      ┌──────────────┐       │
│  │  建模分析    │ ───> │  代码实现    │ ───> │  论文撰写    │       │
│  │   (建模手)   │      │  (编程手)    │      │  (论文手)    │       │
│  │              │      │              │      │              │       │
│  │ 分析题目     │      │ 编写代码     │      │ 撰写论文     │       │
│  │ 选择模型     │      │ 求解结果     │      │ 整理成果     │       │
│  │ 规范术语     │      │ 数据可视化   │      │ 格式规范     │       │
│  └──────────────┘      └──────────────┘      └──────────────┘       │
│         │                      │                      │             │
│         └──────────────────────┴──────────────────────┘             │
│                    信息传递与成果继承                                │
└──────────────────────────────────────────────────────────────────────┘
```

### 三角色介绍

| 角色 | 对应阶段 | 定位 | 核心能力 | 工作性质 |
|:----:|:--------:|------|---------|---------|
| **建模手** | 建模分析 | 大脑 | 数学建模、算法设计 | 理论分析 |
| **编程手** | 代码实现 | 双手 | 代码实现、数据可视化 | 技术实现 |
| **论文手** | 论文撰写 | 喉舌 | 学术写作、成果整理 | 成果表达 |

**建模手**是整个团队的核心大脑，负责将实际问题转化为数学模型，选择合适的算法，并建立术语规范确保后续工作的一致性。

**编程手**是团队的执行双手，负责将建模手的理论设计转化为可运行的代码，求解问题并生成高质量的可视化结果。

**论文手**是团队的发言人，负责将前两个阶段的工作成果整理成规范的学术论文，向评委清晰传达团队的思想和成果。

---

## 建模分析阶段（建模手）

建模手是整个团队的核心大脑，负责将实际问题转化为数学模型。建模分析是整个建模过程的起点，决定了后续工作的方向和质量。

### 角色介绍

建模分析阶段负责将实际问题转化为数学模型，是整个建模过程的起点。

**工作输入**：题目文件（Problem.md 或 PDF）
**工作输出**：分析文档 + 术语表格

### 核心职责

| 职责 | 具体内容 |
|------|---------|
| **题目分析** | 理解背景、判断类型、识别约束、明确目标 |
| **模型选择** | 从算法库中选择合适的数学模型和算法 |
| **算法设计** | 设计求解思路、算法流程、评价指标 |
| **术语规范** | 建立术语表，确保全文术语一致性 |

### 工作流程

```
第零步：附录检查（必须最先执行）
    ↓
    检查是否存在附录文件夹
    运行 analyze_appendix.py 查看完整数据

第一步：题目理解
    ↓
    提取：问题背景、问题类型、数据情况、约束条件、目标要求

第二步：模型选择
    ↓
    参考：assets/ 算法资源库
    选择：根据问题类型匹配算法
    记录：选择依据和适用性分析、参考文献信息

第三步：算法设计
    ↓
    设计：求解思路、算法流程
    确定：评价指标、参数设置

第四步：术语规范
    ↓
    收集：专业术语
    产出：术语表格.md 术语表格

第五步：文档产出
    ↓
    产出：题目分析报告.md
```

### 问题类型与模型匹配

| 问题类型 | 典型特征 | 推荐模型 | 算法文档 |
|---------|---------|---------|---------|
| **优化问题** | 资源分配、路径规划 | 线性规划、整数规划、图论 | 01-优化算法 |
| **预测问题** | 时间序列、趋势预测 | 灰色预测、ARIMA、LSTM | 02-预测类算法 |
| **评价问题** | 方案选优、绩效考核 | AHP、TOPSIS、熵权法 | 03-评价类算法 |
| **分类问题** | 数据聚类、模式识别 | K-Means、DBSCAN、SOM、GMM | 05-统计分析 |
| **仿真问题** | 系统模拟、风险分析 | 蒙特卡洛、元胞自动机 | 06-综合类算法 |

### 必须产出的文件

```
project/
├── 题目分析报告.md          # 主要产出文件
│   ├── 问题分析
│   ├── 模型选择
│   ├── 算法设计
│   ├── 参考文献信息
│   └── 数据要求
│
└── 术语表格.md           # 术语表格（重要！）
    ├── 核心概念术语（中英对照）
    ├── 数学符号术语
    ├── 模型相关术语
    └── 评价指标术语
```

### 模型选择原则

```
┌─────────────────────────────────────────────────┐
│  建模分析模型选择原则（必须遵守）                 │
├─────────────────────────────────────────────────┤
│  1. 高效性：计算速度快、效率高                   │
│  2. 准确性：能准确描述和解决问题                 │
│  3. 简洁性：优先选择相对简单的模型               │
│  4. 创新性：避免过于常见的简单模型               │
│  5. 实用性：避免长时间训练的复杂模型             │
└─────────────────────────────────────────────────┘

❌ 谨慎使用：神经网络、深度学习（优先尝试传统方法）
✅ 推荐使用：规划模型、统计模型、评价模型
```

---

## 代码实现阶段（编程手）

编程手是团队的执行双手，负责将建模手的理论设计转化为可运行的代码。代码实现是将理论转化为实际结果的关键环节。

### 角色介绍

代码实现阶段负责将建模方案转化为可执行的代码，产出计算结果和可视化图表。

**工作输入**：题目文件 + 建模分析文档
**工作输出**：代码文件 + 结果文件 + 可视化图表 + README.md

### 核心原则（必须严格遵守）

**⚠️ 编程语言确认（第一条，必须最先执行）**：
- **在编写任何代码之前，必须先向用户确认使用的编程语言**
- 如果用户未指定，必须主动询问：Python 或 MATLAB
- **禁止**在未确认编程语言的情况下直接开始编写代码

**遵循建模分析的设计**：
- **严格按照建模分析的思路**：必须完全按照建模分析在分析文档中设计的思路进行代码编写
- **严格使用指定的模型和算法**：必须使用建模分析选择的数学模型和算法，不得自行更换
- **保持一致性**：代码实现应与建模分析文档保持完全一致

**超时处理原则**：
- 当代码运行超时时，**加长等待时间**，不要重新写简化的代码

### 核心职责

| 职责 | 具体内容 |
|------|---------|
| **代码编写** | 根据建模文档编写完整可运行的代码 |
| **语言支持** | Python 或 MATLAB |
| **结果输出** | 确保结果正确输出到文件和终端 |
| **数据可视化** | 生成符合 SCI/Nature 风格的精美图表 |
| **文档说明** | 撰写 README.md 项目说明文档 |

### 工作流程

```
第一步：理解需求
    ↓
    读取：建模分析文档
    确认：编程语言（Python/MATLAB）
    理解：题目要求和建模方案

第二步：代码设计
    ↓
    划分：功能模块
    设计：数据结构
    确定：算法实现方法
    规划：可视化图表

第三步：代码实现
    ↓
    编写：结构清晰的代码
    添加：必要的注释
    运行：测试确保正确

第四步：结果验证
    ↓
    确保：结果正确输出
    判断：结果正确性（结合题目、建模文档、运行效果）
    如不正确：进入迭代改进

第五步：迭代改进
    ↓
    如结果不正确：改进代码
    重新运行：验证改进效果
    循环：直到结果正确

第六步：结果输出与可视化
    ↓
    输出：终端打印关键结果
    保存：CSV/TXT 文件
    生成：可视化图表（集成式、3D增强）

第七步：文档撰写
    ↓
    产出：README.md 说明文档
```

### 标准文件结构（必须严格遵守）

```
project/                          # 项目根目录
├── data/                         # 数据文件夹
│   ├── 问题1_data.csv            # 问题1的输入数据（题目提供，只读）
│   ├── 问题2_data.xlsx           # 问题2的输入数据（题目提供，只读）
│   └── ...                       # 其他输入数据文件
├── 问题1_求解.py                 # 问题1的求解代码（Python）或 问题1_求解.m（MATLAB）
├── 问题2_求解.py                 # 问题2的求解代码
├── 问题3_求解.py                 # 问题3的求解代码
├── results/                      # 结果输出文件夹
│   ├── results.csv               # 汇总的计算结果（CSV格式）
│   ├── results.txt               # 详细的计算结果（TXT格式）
│   ├── 问题1_results.csv         # 问题1的单独结果
│   └── 问题2_results.csv         # 问题2的单独结果
├── figures/                      # 可视化图表文件夹
│   ├── figure1.png               # 问题1的结果图（SCI/Nature风格）
│   ├── figure2.png               # 问题2的结果图（SCI/Nature风格）
│   └── figure3.png               # 其他结果图（SCI/Nature风格）
├── 建模手分析文档.md             # 建模分析产出的分析文档（只读）
├── 术语表格.md                   # 建模分析产出的术语表（只读）
└── README.md                     # 项目说明文档（必须创建）
```

### 可视化代码编写原则

**集成式可视化**：
- 可视化代码应与解决问题的主代码一起编写
- 嵌入在数据处理的合适位置
- 运行时可以实时获取数据和画图
- 而不是在运行完成后再单独画图

**3D图表使用**：
- 在合适的场景下使用3D图表以增强视觉效果
- 适用场景：多维数据展示、优化过程可视化、聚类结果展示等

### 可视化约束（重要）

```
┌─────────────────────────────────────────────────┐
│  可视化约束（必须严格遵守）                      │
├─────────────────────────────────────────────────┤
│  ⚠️  每个大图最多包含 2 个子图                  │
│  ⚠️  禁止在一个大图中包含 3 个或更多子图         │
│  ✅  如需展示多张图表，请分成多个独立图片文件    │
└─────────────────────────────────────────────────┘

正确：plt.subplots(1,2) 或 plt.subplots(2,1)
错误：plt.subplots(2,3) 或 plt.subplots(3,3)
```

**SCI/Nature 风格配置**：
```python
plt.rcParams['font.sans-serif'] = ['Arial']
plt.rcParams['font.size'] = 10
plt.rcParams['axes.linewidth'] = 1.5
plt.rcParams['lines.linewidth'] = 2
plt.savefig('figure.png', dpi=300, bbox_inches='tight')
```

### 表格文件处理规范

```
┌─────────────────────────────────────────────────┐
│  表格处理原则（必须严格遵守）                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  题目输入表格 → 只读不写                        │
│  ├─ data.csv                                    │
│  ├─ 附件1.xlsx                                   │
│  └─ 只能读取分析，绝对不能修改                  │
│                                                 │
│  结果输出表格 → 结构固定                         │
│  ├─ result.xlsx                                 │
│  ├─ 只能填写数据，不能修改结构                  │
│  └─ 不添加/删除列，不修改列名                   │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 常用库速查

| 功能 | Python | MATLAB |
|------|--------|--------|
| 线性规划 | scipy.optimize.linprog | linprog |
| 整数规划 | pulp, ortools | intlinprog |
| 机器学习 | scikit-learn (RandomForestClassifier, AdaBoostClassifier, IsolationForest) | - |
| 聚类 | sklearn.cluster | kmeans |
| 回归 | sklearn.linear_model | regress |
| 时间序列 | statsmodels, Prophet | arima |
| 图论 | networkx | graph |
| 可视化 | matplotlib, seaborn | plot |

---

## 论文撰写阶段（论文手）

论文手是团队的发言人，负责将前两个阶段的工作成果整理成规范的学术论文。论文撰写是团队成果的最终呈现，直接决定了评委对团队工作的评价。

### 角色介绍

论文撰写阶段负责将建模分析和代码实现整理成规范的学术论文，是团队成果的最终呈现者。

**工作输入**：题目文件 + 建模分析文档 + 代码结果 + 可视化图表
**工作输出**：完整论文（.md / .docx / .pdf）

### 核心职责

| 职责 | 具体内容 |
|------|---------|
| **论文撰写** | 根据建模和编程成果撰写完整论文 |
| **格式规范** | 确保论文符合数学建模竞赛格式要求 |
| **内容完整** | 包含所有必要章节（摘要、模型、结果等） |
| **表述专业** | 使用学术语言，避免AI味道 |
| **图文并茂** | 必须使用代码实现阶段生成的图片 |

### 工作流程

```
第一步：收集资料
    ↓
    收集：建模分析文档
    查看：代码实现和运行结果
    确认：题目要求和背景
    检查：用户自定义模板

第二步：论文规划
    ↓
    确定：使用格式（用户模板/默认格式）
    规划：章节结构和内容篇幅
    安排：图表位置和数量

第三步：论文撰写
    ↓
    撰写：标准格式的完整论文（≥15000字）
    引用：建模文档中的公式和文献
    整合：代码实现产出的图表和结果

第四步：质量检查
    ↓
    检查：格式规范
    检查：逻辑连贯
    检查：图表完整
```

### 标准论文结构

```
┌─────────────────────────────────────────────────┐
│  标准数学建模论文结构                            │
├─────────────────────────────────────────────────┤
│                                                 │
│  1. 摘要 ⭐ 最重要的部分，评委首先看            │
│  2. 问题重述                                    │
│  3. 问题分析                                    │
│  4. 模型假设                                    │
│  5. 符号说明                                    │
│  6. 模型建立                                    │
│     ├── 模型选择                                │
│     ├── 模型构建                                │
│     └── 求解方法                                │
│  7. 模型求解                                    │
│     ├── 算法流程                                │
│     └── 求解结果                                │
│  8. 结果分析                                    │
│     ├── 结果解读                                │
│     └── 模型检验                                │
│  9. 模型评价                                    │
│     ├── 优点                                    │
│     └── 缺点                                    │
│  10. 模型推广                                   │
│  11. 参考文献                                   │
│  12. 附录                                       │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 摘要写作规范

**摘要决定论文的第一印象，必须认真对待！**

```
┌─────────────────────────────────────────────────┐
│  摘要四要素（200-300字）                         │
├─────────────────────────────────────────────────┤
│                                                 │
│  1. 问题背景：一句话说明题目背景                 │
│  2. 方法：用了什么模型和方法                     │
│  3. 结果：主要结果是什么（具体数据）⭐          │
│  4. 结论：结论是什么                             │
│                                                 │
└─────────────────────────────────────────────────┘

示例模板：
本文针对[问题描述]，建立了[模型名称]模型。首先，[方法1]；
其次，[方法2]；最后，[方法3]。求解得到：[主要结果1]、[主要结果2]。
结果表明：[结论]。本文模型具有[优点]。
```

### 图文并茂（必须严格遵守）

**⚠️ 图片使用要求**：

1. **必须使用代码实现生成的图片**：
   - 论文中的所有图片必须来自代码实现运行代码后生成的可视化图表
   - 图片位置：`figures/` 目录下
   - 禁止使用网络图片或其他来源的图片

2. **每道题的图片放置位置**：
   - 每道题对应的图片必须写到该题的求解结果部分
   - 问题1的图片放在"模型求解 - 问题一的求解结果"部分
   - 问题2的图片放在"模型求解 - 问题二的求解结果"部分

3. **图片引用格式**：
   ```markdown
   ![图1 问题1的结果分析](figures/figure1.png)

   如图1所示，[对图片进行说明和分析]...
   ```

4. **图文结合原则**：
   - 每张图片必须在正文中有引用和说明
   - 图片下方或上方应有详细的文字解释

### 写作规范（必须遵守）

```
┌─────────────────────────────────────────────────┐
│  论文写作三大约束                                │
├─────────────────────────────────────────────────┤
│                                                 │
│  1. 禁止第一人称                                 │
│     ❌ 本研究、本论文、我们、笔者                │
│     ✅ 本文、该研究、（省略主语）                │
│                                                 │
│  2. 避免过度分点                                 │
│     ❌ 大量使用 1.2.3. 分点叙述                  │
│     ✅ 多使用整段连贯文字                        │
│                                                 │
│  3. 表格不能修改                                 │
│     ❌ 修改题目表格的结构或格式                  │
│     ✅ 只引用表格中的数据和结果                  │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 图表规范

- **图**：图号 + 图题（在图下方）
- **表**：表号 + 表题（在表上方）
- **引用**：图表在文中必须有引用
- **格式**：使用三线表格式

```
示例：

  表1  不同方法的结果对比
  ┌─────────────┬─────────┬──────────┐
  │  方法       │  准确率 │  运行时间 │
  ├─────────────┼─────────┼──────────┤
  │  方法A      │  95.2%  │   12.3s  │
  │  方法B      │  97.8%  │   15.6s  │
  └─────────────┴─────────┴──────────┘

  图1  预测结果对比图
  [图表内容]
```

### 质量标准

| 标准 | 要求 |
|------|------|
| 字数要求 | **论文字数不少于15000字**（不含附录和代码） |
| 格式规范 | 符合学术论文格式要求 |
| 逻辑清晰 | 各部分之间逻辑连贯 |
| 表述准确 | 专业术语使用正确 |
| 内容完整 | 包含所有必要部分 |
| 图表精美 | 图表清晰、美观、有说明 |

### 参考文献引用

建模分析的 `术语表格.md` 和 assets/ 算法文档中的"关键文献"表格可直接用于参考文献部分。

---

## 阶段协作

### 信息传递链

```
┌─────────┐      分析文档      ┌─────────┐      代码+图表     ┌─────────┐
│建模手   │ ────────────────> │编程手   │ ────────────────> │论文手   │
│(建模分析)│      术语表       │(代码实现)│      完整成果     │(论文撰写)│
│         │                    │         │                    │         │
│ 题目    │                    │ 结果    │                    │ 论文    │
└─────────┘                    └─────────┘                    └─────────┘
```

### 关键交接点

| 交接点 | 传递内容 | 接收方使用 |
|--------|---------|-----------|
| 建模手 → 编程手 | 分析文档、术语表、参考文献 | 理解需求、编写代码 |
| 编程手 → 论文手 | 代码、结果、图表 | 整理成果、撰写论文 |
| 建模手 → 论文手 | 分析文档、公式、文献 | 理论依据、参考文献 |

### 协作要点

1. **术语一致性**：建模手创建的术语表贯穿三阶段
2. **模型可实施**：建模手选择模型时考虑编程实现可行性
3. **结果可展示**：编程手可视化考虑论文展示需求
4. **论文真实性**：论文手必须基于实际成果，不虚构数据

---

## 常见问题

### 建模手（建模分析）FAQ

**Q: 如何选择合适的算法？**
> A: 查看 `assets/README.md` 中的"按题型查找"表格。

**Q: 术语表为什么必须产出？**
> A: 确保三阶段术语一致，便于论文英文化，提高专业性。

**Q: 必须产出哪些文件？**
> A: `题目分析报告.md` 和 `术语表格.md` 两个文件。

### 编程手（代码实现）FAQ

**Q: 用户未指定编程语言怎么办？**
> A: 必须先询问用户选择 Python 还是 MATLAB。

**Q: 为什么限制每个图最多2个子图？**
> A: SCI/Nature 风格要求图表清晰，过多子图影响可读性。

**Q: 表格文件如何处理？**
> A: 题目输入表格只读不写；结果表格保持结构不变，只填写数据。

### 论文手（论文撰写）FAQ

**Q: 摘要多长合适？**
> A: 200-300字，包含问题背景、方法、结果、结论四要素。

**Q: 能否使用"本研究"等第一人称？**
> A: 禁止使用。应使用"本文"、"该研究"等第三人称表述。

**Q: 如何避免论文有"AI味道"？**
> A: 多使用整段叙述，避免过度分点；添加个人分析和见解；调整表述风格。

---

## 附录：详细文档

各阶段的完整工作流程和方法说明：

- **[📘 建模手说明.md](./建模手说明.md)** - 详细的建模分析流程
- **[💻 编程手说明.md](./编程手说明.md)** - 代码实现和可视化规范
- **[📝 论文手说明.md](./论文手说明.md)** - 论文撰写和格式要求

---

**数学建模是团队协作的艺术，三个阶段各司其职、紧密配合，才能产出高质量的建模成果。**
